stages:
  - test
  - deploy
  - push_to_github

test_feature:
  stage: test
  script:
    - echo "Running tests/feature"
  only:
    - /^feature\/*/

deploy_to_staging:
  stage: deploy
  script:
    - echo "Deploying to staging (develop)"
  only:
    - develop

deploy_to_production:
  stage: deploy
  script:
    - echo "Deploying to production (master)"
  only:
    - master

push_to_github:
  stage: push_to_github
  script:
    - git config --global user.email "ravencarlostrodrigo@gmail.com"
    - git config --global user.name "Raven Rodrigo"
    - git remote add github https://github.com/inventory.git
    - git checkout ${CI_COMMIT_REF_NAME}
    - git push github ${CI_COMMIT_REF_NAME} --force
  only:
    - /^feature\/*/
    - develop
    - master
