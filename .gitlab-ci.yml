stages:
  - test
  - deploy
  - push_to_github

test_feature:
  stage: test
  script:
    - echo "Running tests/feature"
  only:
    - /^feature\/*/

deploy_to_staging:
  stage: deploy
  script:
    - echo "Deploying to staging (develop)"
  only:
    - develop

deploy_to_production:
  stage: deploy
  script:
    - echo "Deploying to production (master)"
  only:
    - master

push_to_github:
  stage: push_to_github
  script:
    - git remote add github https://github.com/avenarl/inventory.git
    - git push github HEAD:feature/product-list --force
  only:
    - /^feature\/*/
    - develop
    - master
  variables:
    GIT_STRATEGY: none
